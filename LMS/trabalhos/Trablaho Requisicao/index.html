<!DOCTYPE html>
<html>
    <head>
        <title>Requisições em AJAX</title>
    </head>
    <style>
        table{
            border: 1px solid black;
            border-spacing: 0;
        }th,td{
            border: 1px solid black;
            padding: 10pt;
            border-spacing: 0; 
        }
    </style>
    <body>
        <button onclick="document.location.reload(true)">Carregar Novo Usuário</button><br><br>
        <table id="tabela">
            <thead>
                <th>Imagem Perfil</th>
                <th>Nome</th>
                <th>Gênero</th>
                <th>Idade</th>
                <th>Data de Nascimento</th>
            </thead>
            <tbody>
                <td><img src="#" id="img"></td>
                <td id="nome"></td>
                <td id="genero"></td>
                <td id="idade"></td>
                <td id="data-nasc"></td>
            </tbody>
        </table>
        <script>
            var request = new XMLHttpRequest()

            request.open('GET', 'https://randomuser.me/api/', true) //get tá pegando o negocio da api

            request.onload = function () {
                var dados = JSON.parse(this.response) //renomear para dados do json

                if (request.status >= 200 && request.status < 400) {

                    var img = document.querySelector("img");
                    img.setAttribute("src", dados.results[0].picture.large);

                    document.getElementById('nome').innerHTML = dados.results[0].name.title + " " + dados.results[0].name.first + " " + dados.results[0].name.last;

                    document.getElementById('idade').innerHTML = dados.results[0].dob.age + " anos";

                    var dt = new Date(dados.results[0].dob.date);

                    if (dados.results[0].gender == "male") {
                        document.getElementById('genero').innerHTML = "Homem";
                        var data_nasc = document.getElementById('data-nasc').innerHTML = "Nascido em: " + dt.getDay() + "/ " + dt.getMonth() + "/ " + dt.getFullYear();
                    } else {
                        document.getElementById('genero').innerHTML = "Mulher";
                        var data_nasc = document.getElementById('data-nasc').innerHTML = "Nascida em: " + dt.getDay() + "/ " + dt.getMonth() + "/ " + dt.getFullYear();

                    }

                    document.getElementById("local").innerHTML = "Localizado em: " + dados.results[0].location.coordinates.latitude + "," + dados.results[0].location.coordinates.longitude + "<br> ou veja clicando <a href='http://maps.google.com?q=" + dados.results[0].location.coordinates.latitude + "," + dados.results[0].location.coordinates.longitude + "' target='_blank'>aqui</a>";

                } else {
                    console.log('error')
                }
            }


            request.send()
            </script>
    </body>
    
</html>
